import scrapy
from maximum_rumble.items import ChannelItem, VideoItem

class RumbleSpider(scrapy.Spider):
    name = "rumble_spider"
    #start_urls = ['https://rumble.com/c/ReallCandaceOwens', 'https://rumble.com/c/CityBoysHQ', 'https://rumble.com/c/Daywave', 'https://rumble.com/c/BBTNetwork', 'https://rumble.com/c/BorderWars', 'https://rumble.com/c/JohnMcTernansInsights', 'https://rumble.com/c/aidareva', 'https://rumble.com/c/JustTheNews', 'https://rumble.com/c/ConservativeMomma', 'https://rumble.com/c/TwoMikes', 'https://rumble.com/c/clubedochaves', 'https://rumble.com/c/LifeRegenerator', 'https://rumble.com/c/RandPaulforUSSenate', 'https://rumble.com/c/PeteLive', 'https://rumble.com/c/KashsCorner', 'https://rumble.com/c/HarryTheSoulCoach', 'https://rumble.com/c/ElijahClips', 'https://rumble.com/c/Fleccas', 'https://rumble.com/c/FoxRiverLutheranChurch', 'https://rumble.com/c/OnTheFringe', 'https://rumble.com/c/LindellTV', 'https://rumble.com/c/DCMediagirl', 'https://rumble.com/c/FreedomHasAVoice', 'https://rumble.com/c/MRCAPACHOTV', 'https://rumble.com/c/RAMZPAUL', 'https://rumble.com/c/DarkTaurus/videos?date=this-week', 'https://rumble.com/c/markkaye', 'https://rumble.com/c/TannerBraungardt', 'https://rumble.com/c/RestoredRepublicUS', 'https://rumble.com/c/OPFreedom', 'https://rumble.com/c/SeanHannity', 'https://rumble.com/c/PressTV', 'https://rumble.com/c/TheInfoWarrior', 'https://rumble.com/c/PennyKelly', 'https://rumble.com/c/DevinNunes', 'https://rumble.com/c/FiresideGrace', 'https://rumble.com/c/MidnightsEdge', 'https://rumble.com/c/CourtneyElizXbeth', 'https://rumble.com/c/Bongino', 'https://rumble.com/c/QuiteFrankly', 'https://rumble.com/c/FallOfCabalSequel', 'https://rumble.com/c/Lauraespath', 'https://rumble.com/c/BenShapiro', 'https://rumble.com/c/Franssen', 'https://rumble.com/c/DAHBOO7', 'https://rumble.com/c/Pangea', 'https://rumble.com/c/TrumpNewsChannel', 'https://rumble.com/c/BlazeTV', 'https://rumble.com/c/PhilGodlewski', 'https://rumble.com/c/SavedByHisGrace2', 'https://rumble.com/c/DOENUT', 'https://rumble.com/c/NewWorldAllstar', 'https://rumble.com/c/CliftonDuncan', 'https://rumble.com/c/StirlingCooper', 'https://rumble.com/c/KaiCenatOfficial', 'https://rumble.com/c/c-566727', 'https://rumble.com/c/710KNUS', 'https://rumble.com/c/X22DaveReport', 'https://rumble.com/c/GingerASMR', 'https://rumble.com/c/Action4Canada', 'https://rumble.com/c/AnnVandersteel', 'https://rumble.com/c/MilitarySummary', 'https://rumble.com/c/TheInterviewRoom', 'https://rumble.com/c/Akademiks', 'https://rumble.com/c/RegenerationNashville', 'https://rumble.com/c/RyanDawson', 'https://rumble.com/c/StreetTalk', 'https://rumble.com/c/FearlessWithJasonWhitlock', 'https://rumble.com/c/lporiginalg', 'https://rumble.com/c/TheBattlegrounds', 'https://rumble.com/c/ColorizedCinema', 'https://rumble.com/c/Bosskwar', 'https://rumble.com/c/BradAndLex', 'https://rumble.com/c/ToTheLifeboats', 'https://rumble.com/c/BannonsWarRoom', 'https://rumble.com/c/MJTruthTalk', 'https://rumble.com/c/WomenOfWrestling', 'https://rumble.com/c/DarknessIsFalling', 'https://rumble.com/c/LofiGirl', 'https://rumble.com/c/PJW', 'https://rumble.com/c/DineshDsouza', 'https://rumble.com/c/JHeeHee', 'https://rumble.com/c/hickok45', 'https://rumble.com/c/JohnBurk', 'https://rumble.com/c/TheAlexJonesShow', 'https://rumble.com/c/NewRules', 'https://rumble.com/c/RFKjr', 'https://rumble.com/c/visaolibertaria', 'https://rumble.com/c/BennyJohnson', 'https://rumble.com/c/EMichaelJones', 'https://rumble.com/c/WTC', 'https://rumble.com/c/Janine1', 'https://rumble.com/c/TheBigJackpot', 'https://rumble.com/c/phetasy', 'https://rumble.com/c/alexiswilkins', 'https://rumble.com/c/PetitAlbert', 'https://rumble.com/c/TheQuartering', 'https://rumble.com/c/toddstarnes', 'https://rumble.com/c/DLUXNATION', 'https://rumble.com/c/SunfellowCovid19', 'https://rumble.com/c/NYCitizensAudit', 'https://rumble.com/c/JesseOnFire', 'https://rumble.com/c/MilesVideoLibrary', 'https://rumble.com/c/Jotvingis', 'https://rumble.com/c/TheUnjectedShow', 'https://rumble.com/c/DavidLehre', 'https://rumble.com/c/BrannonHowseLive', 'https://rumble.com/c/50WordShortStories', 'https://rumble.com/c/BradCGZ', 'https://rumble.com/c/HodgeTwins', 'https://rumble.com/c/CountdowntotheKingdom', 'https://rumble.com/c/geopoliticsinconflict', 'https://rumble.com/c/SyntheticMan', 'https://rumble.com/c/JustinBarclay', 'https://rumble.com/c/Bongino/livestreams', 'https://rumble.com/c/TulsiGabbard', 'https://rumble.com/c/Varlinas', 'https://rumble.com/c/RobertGouveia', 'https://rumble.com/c/ResistanceChicks', 'https://rumble.com/c/LaQuintaColumna', 'https://rumble.com/c/FlashPoint', 'https://rumble.com/c/c-5299366', 'https://rumble.com/c/BattlegroundMelbourne', 'https://rumble.com/c/DougBillings', 'https://rumble.com/c/AGAwUSA', 'https://rumble.com/c/TheCrazyChannel', 'https://rumble.com/c/TheDilleyShow', 'https://rumble.com/c/AlexStein99', 'https://rumble.com/c/powerslap', 'https://rumble.com/c/TonyKatz', 'https://rumble.com/c/DavidStraight', 'https://rumble.com/c/AugieRFC', 'https://rumble.com/c/NewsPeace', 'https://rumble.com/c/MarkDice', 'https://rumble.com/c/TeenYoga', 'https://rumble.com/c/JonathanCahn', 'https://rumble.com/c/KEDTalk', 'https://rumble.com/c/IQNN', 'https://rumble.com/c/TristanTateOfficial', 'https://rumble.com/c/PaulMcGuire', 'https://rumble.com/c/FOJCRadio', 'https://rumble.com/c/SGAnonAndJuanOSavin', 'https://rumble.com/c/DailyCaller', 'https://rumble.com/c/TheRundownOfOurReality', 'https://rumble.com/c/ReasonableTV', 'https://rumble.com/c/REALPFIGUEIREDO', 'https://rumble.com/c/TheDouglasDucoteShow', 'https://rumble.com/c/GEORGENEWS', 'https://rumble.com/c/ShouldISmokeThis', 'https://rumble.com/c/DonaldJTrumpJr', 'https://rumble.com/c/RKOutpost', 'https://rumble.com/c/JustInformedTalk', 'https://rumble.com/c/BENJAMINFULFORDUPDATE', 'https://rumble.com/c/KaiNSpeed', 'https://rumble.com/c/CallForAnUprising', 'https://rumble.com/c/DETOXKEY', 'https://rumble.com/c/PragerU', 'https://rumble.com/c/GeorgeGallowayOfficial', 'https://rumble.com/c/TheSurvivalPreppers', 'https://rumble.com/c/WillJohnson', 'https://rumble.com/c/ECETISTARGATEOFFICIAL', 'https://rumble.com/c/stevewilldoit', 'https://rumble.com/c/RedpillUSAPatriots', 'https://rumble.com/c/AndWeKnow', 'https://rumble.com/c/RekietaLaw', 'https://rumble.com/c/JamesKaddis', 'https://rumble.com/c/spaceXcentric', 'https://rumble.com/c/Cafelockedout', 'https://rumble.com/c/c-5292685', 'https://rumble.com/c/ALBUCKS', 'https://rumble.com/c/JohnStossel', 'https://rumble.com/c/EpochTV', 'https://rumble.com/c/GrahamAllenOfficial', 'https://rumble.com/c/AwakeCanada', 'https://rumble.com/c/WorldPokerTour', 'https://rumble.com/c/Infowars', 'https://rumble.com/c/GGreenwald', 'https://rumble.com/c/c-2558350', 'https://rumble.com/c/markpassio', 'https://rumble.com/c/FliplikeZ', 'https://rumble.com/c/BigZVideoGamesChannel', 'https://rumble.com/c/c-2278000', 'https://rumble.com/c/tateconfidential', 'https://rumble.com/c/GalacticHistorian', 'https://rumble.com/c/HotEthiopianChannel', 'https://rumble.com/c/c-2115894', 'https://rumble.com/c/NIOLAND', 'https://rumble.com/c/tearsofJeremiah', 'https://rumble.com/c/SGTReport', 'https://rumble.com/c/XmandreDimpleShow', 'https://rumble.com/c/SGHSGAnon', 'https://rumble.com/c/AwakenWithJP', 'https://rumble.com/c/MurTech', 'https://rumble.com/c/DonSandroOPadrinho', 'https://rumble.com/c/WoozNews', 'https://rumble.com/c/TheDaveXRPLionShow', 'https://rumble.com/c/JohnnysReloadingBench', 'https://rumble.com/c/RSBN', 'https://rumble.com/c/AlexanderMercouris', 'https://rumble.com/c/Formedonda', 'https://rumble.com/c/VaccineSafetyResearchFoundation', 'https://rumble.com/c/RagingDissident', 'https://rumble.com/c/GrantStinchfield', 'https://rumble.com/c/BadlandsMedia', 'https://rumble.com/c/ColdBeerConfessional', 'https://rumble.com/c/TheBubbaArmy', 'https://rumble.com/c/ChrissieMayr', 'https://rumble.com/c/TRIBUNALSforJUSTICE', 'https://rumble.com/c/WillCain', 'https://rumble.com/c/DevinGibson', 'https://rumble.com/c/SaltyCracker', 'https://rumble.com/c/GrassRootsWarriorNetwork', 'https://rumble.com/c/ecodellarete', 'https://rumble.com/c/DrRimaTruthReports', 'https://rumble.com/c/AmRadPod', 'https://rumble.com/c/NewsmaxTV', 'https://rumble.com/c/LondonRealTV', 'https://rumble.com/c/TheFlatEarthFiles', 'https://rumble.com/c/AmericanuckRadio', 'https://rumble.com/c/TwoRedPills', 'https://rumble.com/c/AlexZedra', 'https://rumble.com/c/AlexJonesChannel', 'https://rumble.com/c/ThePodcastoftheLotusEaters', 'https://rumble.com/c/SIAN', 'https://rumble.com/c/Kilmeade', 'https://rumble.com/c/JeffMAC', 'https://rumble.com/c/c-5302339', 'https://rumble.com/c/MattKohrs', 'https://rumble.com/c/GeopoliticsAndEmpire', 'https://rumble.com/c/WendyBellRadio', 'https://rumble.com/c/NOSEYHEAUXLIVE', 'https://rumble.com/c/WorldCouncilForHealth', 'https://rumble.com/c/JustPearlyThings', 'https://rumble.com/c/freshandfit/livestreams', 'https://rumble.com/c/stevewilldoit2', 'https://rumble.com/c/TheMichelleMooreShow', 'https://rumble.com/c/ChadPrather', 'https://rumble.com/c/zion4131', 'https://rumble.com/c/Monarky', 'https://rumble.com/c/KillDogmaTv', 'https://rumble.com/c/TheArmonWigginsshow', 'https://rumble.com/c/freshandfit?page=2', 'https://rumble.com/c/DrJohnBergmanDC', 'https://rumble.com/c/NinaInfinity', 'https://rumble.com/c/c-3677292', 'https://rumble.com/c/SenRonJohnson', 'https://rumble.com/c/Mizkif', 'https://rumble.com/c/NewsTalkSTL', 'https://rumble.com/c/c-1810857', 'https://rumble.com/c/And99', 'https://rumble.com/c/CoachCoreyWayne', 'https://rumble.com/c/RTDocumentary', 'https://rumble.com/c/Timcast', 'https://rumble.com/c/theduran', 'https://rumble.com/c/PatriotUnderground', 'https://rumble.com/c/AndrewKibe', 'https://rumble.com/c/ganval', 'https://rumble.com/c/TowerGangPod', 'https://rumble.com/c/Revengeofthecis', 'https://rumble.com/c/Nitrocross', 'https://rumble.com/c/roseannebarr', 'https://rumble.com/c/GeneDecode', 'https://rumble.com/c/FKN', 'https://rumble.com/c/TheJimmyDoreShow', 'https://rumble.com/c/DrSteveTurley', 'https://rumble.com/c/RESETOWIEC', 'https://rumble.com/c/MrGunsNGear', 'https://rumble.com/c/tennesseestands', 'https://rumble.com/c/OpinionFreeMarket', 'https://rumble.com/c/rwmalonemd', 'https://rumble.com/c/c-5297119', 'https://rumble.com/c/JOHNROURKE', 'https://rumble.com/c/MattWalsh', 'https://rumble.com/c/TurnThePage', 'https://rumble.com/c/MyLittleHomestead', 'https://rumble.com/c/EXPOSEthePEDOSendOfTheCabal', 'https://rumble.com/c/AddedValueblog', 'https://rumble.com/c/TheCoronaInvestigativeCommitteeGrandJury', 'https://rumble.com/c/Blessed2Teach', 'https://rumble.com/c/otevrisvoumysl', 'https://rumble.com/c/Fanosthevoice', 'https://rumble.com/c/AllThingsArtBell', 'https://rumble.com/c/Behizy', 'https://rumble.com/c/LeeCamp', 'https://rumble.com/c/InTheLitterBox', 'https://rumble.com/c/RevolverNews', 'https://rumble.com/c/911Documentaries', 'https://rumble.com/c/SailingDarkAngel', 'https://rumble.com/c/PASTORSANDROROCHA', 'https://rumble.com/c/ElizabethRimini', 'https://rumble.com/c/Exulansic', 'https://rumble.com/c/ConoceAmaYViveTuFe', 'https://rumble.com/c/MusicEspanol', 'https://rumble.com/c/ManInAmerica', 'https://rumble.com/c/AMWakeup', 'https://rumble.com/c/AmandaGrace', 'https://rumble.com/c/SC360Media', 'https://rumble.com/c/AFLDS', 'https://rumble.com/c/Scottyfilms', 'https://rumble.com/c/EthanLucasShow', 'https://rumble.com/c/Locals', 'https://rumble.com/c/MegynKelly', 'https://rumble.com/c/SebGorka', 'https://rumble.com/c/BombShellReLoaded', 'https://rumble.com/c/CaptainDeplorable', 'https://rumble.com/c/GrizzlyPatriot', 'https://rumble.com/c/TheNerdRealm', 'https://rumble.com/c/TheArchCast', 'https://rumble.com/c/JiDion', 'https://rumble.com/c/SSOD', 'https://rumble.com/c/GoodLuckAmerica', 'https://rumble.com/c/TheLavigneShow', 'https://rumble.com/c/freshandfit', 'https://rumble.com/c/Chief117BR', 'https://rumble.com/c/TheHakeReport', 'https://rumble.com/c/NYSTV', 'https://rumble.com/c/AWE', 'https://rumble.com/c/Destiny', 'https://rumble.com/c/OliveTreeMinistries', 'https://rumble.com/c/WorldAlternativeMedia', 'https://rumble.com/c/BKFC', 'https://rumble.com/c/AlisonMorrow', 'https://rumble.com/c/3DPrintGeneral', 'https://rumble.com/c/EmreCetin', 'https://rumble.com/c/BradAfterDark', 'https://rumble.com/c/TrishReganShow', 'https://rumble.com/c/TOTO1', 'https://rumble.com/c/Hobbista', 'https://rumble.com/c/PeakProsperity', 'https://rumble.com/c/AAKROYD', 'https://rumble.com/c/OANN', 'https://rumble.com/c/PvPArrests', 'https://rumble.com/c/c-5213568', 'https://rumble.com/c/RedpillProject', 'https://rumble.com/c/TheSovereignSOUL', 'https://rumble.com/c/StevenCrowder', 'https://rumble.com/c/DavidStraightUtah', 'https://rumble.com/c/JorgeMasvidal', 'https://rumble.com/c/WatchmanReport', 'https://rumble.com/c/SteelToeMorningShow', 'https://rumble.com/c/StewPeters', 'https://rumble.com/c/SANDROROCHA', 'https://rumble.com/c/rossmanngroup', 'https://rumble.com/c/GeneralShepherd', 'https://rumble.com/c/THOUGHTSCAMERAACTION', 'https://rumble.com/c/ElijahStreams', 'https://rumble.com/c/SNEAKO/livestreams', 'https://rumble.com/c/PatriotNews4u', 'https://rumble.com/c/BombardsBodyLanguage', 'https://rumble.com/c/TheFallOftheCabalSeries', 'https://rumble.com/c/shaunthompsonshow', 'https://rumble.com/c/RamolaDReports', 'https://rumble.com/c/c-3996739', 'https://rumble.com/c/XrayGirl', 'https://rumble.com/c/DerekJohnsonGreatIntel', 'https://rumble.com/c/TheGaggle', 'https://rumble.com/c/DrKiaPruitt', 'https://rumble.com/c/c-1011795', 'https://rumble.com/c/themasteratit', 'https://rumble.com/c/4USAFLORIDA', 'https://rumble.com/c/SandmanMGTOW1', 'https://rumble.com/c/TimTruth', 'https://rumble.com/c/SCOTTTV', 'https://rumble.com/c/TheWorldAccordingtoBenStein', 'https://rumble.com/c/CharlottaRexmark', 'https://rumble.com/c/ChavesDublado', 'https://rumble.com/c/FlawdTV', 'https://rumble.com/c/OppenheimerRanchProject', 'https://rumble.com/c/TheOsbournesPodcast', 'https://rumble.com/c/2023EliseoBonanno', 'https://rumble.com/c/PVP', 'https://rumble.com/c/TopChess', 'https://rumble.com/c/AltDriver', 'https://rumble.com/c/PROYECTOFUERTEPREGON2021', 'https://rumble.com/c/FantasyFlockNetwork', 'https://rumble.com/c/Azoreslive', 'https://rumble.com/c/jfradioshow', 'https://rumble.com/c/Orf', 'https://rumble.com/c/TheDickShow', 'https://rumble.com/c/DarkKnight', 'https://rumble.com/c/RedPill78', 'https://rumble.com/c/Relentless', 'https://rumble.com/c/Dnajlion7', 'https://rumble.com/c/RiceGum', 'https://rumble.com/c/PeoplesPundit', 'https://rumble.com/c/JUANOSAVINPRESENTATIONS', 'https://rumble.com/c/NightAndDayNetwork', 'https://rumble.com/c/2broke2quit', 'https://rumble.com/c/DonaldTrump', 'https://rumble.com/c/AGirlintheUniverse', 'https://rumble.com/c/TRW', 'https://rumble.com/c/TheLamarzulli', 'https://rumble.com/c/diywife', 'https://rumble.com/c/SkeeterJean', 'https://rumble.com/c/JonBravo', 'https://rumble.com/c/TheLastFrequency', 'https://rumble.com/c/Nerdrotic', 'https://rumble.com/c/LuisLazarusZeusTV', 'https://rumble.com/c/InTheStormNews', 'https://rumble.com/c/DeloraOBrien', 'https://rumble.com/c/PatriotStreetfighter', 'https://rumble.com/c/lwchino', 'https://rumble.com/c/WretchedWatchmen', 'https://rumble.com/c/DENKanstoss', 'https://rumble.com/c/c-945427', 'https://rumble.com/c/conspiracypilled', 'https://rumble.com/c/TruthSeeker88', 'https://rumble.com/c/DrJohnCampbell', 'https://rumble.com/c/CliveDeCarle', 'https://rumble.com/c/c-5275075', 'https://rumble.com/c/Mindbodybeautyinstitute', 'https://rumble.com/c/AndrewTateSpeech', 'https://rumble.com/c/DerekCharlesJohnson', 'https://rumble.com/c/TheTruthFactory', 'https://rumble.com/c/AndreasTournavitis', 'https://rumble.com/c/artofkickz', 'https://rumble.com/c/McDuffLives', 'https://rumble.com/c/KaiCenat', 'https://rumble.com/c/faithlaneTV', 'https://rumble.com/c/EzraInternational', 'https://rumble.com/c/DrewHernandez', 'https://rumble.com/c/BigDigEnergy', 'https://rumble.com/c/AnimeGutPunch', 'https://rumble.com/c/SNEAKO', 'https://rumble.com/c/PatrickGavia', 'https://rumble.com/c/BrianSStaveley', 'https://rumble.com/c/LFATV', 'https://rumble.com/c/UnMisioneroParaCristo', 'https://rumble.com/c/TomStapleton', 'https://rumble.com/c/radioroma', 'https://rumble.com/c/WayneDupreeShow', 'https://rumble.com/c/DaddyDragonChannel', 'https://rumble.com/c/AmericaFirstCafe', 'https://rumble.com/c/LateNightWithAdonisPaul', 'https://rumble.com/c/MartinSellnerDE', 'https://rumble.com/c/Veterans4Freedom', 'https://rumble.com/c/RealJackHibbs', 'https://rumble.com/c/Swiadomy', 'https://rumble.com/c/MxR']

    #start_urls = ['https://rumble.com/c/Monarky', 'https://rumble.com/c/LofiGirl', 'https://rumble.com/user/marshall_Bushcraft']
    start_urls = ['https://rumble.com/c/Monarky']
    visited_channels = set()

    def parse(self, response):
        # pegando os links para todos os vídeos do canal
        videos_in_current_page = response.css("li.video-listing-entry")

        for video in videos_in_current_page:
            video_data = {}

            video_data["title"] = video.css("h3.video-item--title::text").get().strip()
            video_links = video.css("a.video-item--a").get()
            video_data["url"] = video_links[video_links.find('href="') + len('href="') : video_links.find('">')].strip()
            video_data["img_src"] = video_links[video_links.find('src="') + len('src="') : (video_links.find(' alt'))].strip()
            video_data["duration"] = video_links[video_links.find('data-value="') + len('data-value="') : video_links.find('"></span></a>')]

            url_video = "https://rumble.com" + video_data["url"]
            yield scrapy.Request(url_video, callback=self.parse_video, meta={'video_data': video_data})

            if response.css(".channel-header--verified").get() != None:
                video_data["channel_is_verified"] = True
            else:
                video_data["channel_is_verified"] = False

            try:
                all_next_pages = response.css('.paginator--ul').get().replace('\t', "").replace("\n", "")
            except:
                continue

            try: # procurando proximas paginas de videos
                next_page_url = all_next_pages.split('paginator--li--next')[1]
                next_page_url = next_page_url[next_page_url.find('href="') + len('href="'):next_page_url.find('"></a>')]
                next_page = response.urljoin(next_page_url)
                yield scrapy.Request(next_page, callback=self.parse)

            except:
                continue


    def parse_video(self, response):
        video_info = {}

        views = response.css(".media-description-info-views").get()
        video_info["views"] = views[views.find('</svg>\t\t\t\t\t\t\t') + len("</svg>\t\t\t\t\t\t\t"):].split()[0]
        video_info["thumbs_up"] = response.css(".rumbles-vote-pill-up > span:nth-child(2)::text").get()
        video_info["thumbs_down"] = response.css(".rumbles-vote-pill-down > span:nth-child(2)::text").get()

        comments_number = response.css("#video-comments").get()
        video_info["comments_number"] = comments_number[comments_number.find('id="video-comments-loading">Loading ') + len('id="video-comments-loading">Loading '):].split()[0]

        uploaded_at = response.css(".media-description-info-stream-time > div:nth-child(2)").get()
        try:
            video_info["uploaded_at"] = uploaded_at.split('"')[1]
        except:
            video_info["uploaded_at"] = None

        channel_name = response.css(".media-heading-name::text").get()
        video_info["channel_name"] = channel_name.replace("\t", "").replace("\n", "")
        self.visited_channels.add(video_info["channel_name"])

        channel_followers = response.css(".media-heading-num-followers::text").get()
        video_info["channel_followers"] = channel_followers.replace("\t", "").replace("\n", "").replace("followers","")

        channel_url = response.css(".media-by--a").get()
        video_info["channel_url"] = channel_url[channel_url.find('href="') + len('href="'):channel_url.find('" rel="author"')]

        related_channels = []
        related_videos = []
        for related_video in response.css("ul.mediaList-list:nth-child(3) > li").getall():
            related_videos.append(related_video[related_video.find('href="') + len('href="'):].split('"')[0])
            related_channels.append(related_video[related_video.find('class="mediaList-by-heading">') + len('class="mediaList-by-heading">'):related_video.find("</h4>")])

        video_info["related_channels"] = related_channels
        video_info["related_videos"] = related_videos

        video_data = response.meta.get('video_data', {})
        video_data.update(video_info)

        return video_data


    def parse_channel(self, response):
        # Coleta informações do canal
        channel = ChannelItem()
        channel['channel_name'] = response.css(".channel-header--title-wrapper > h1:nth-child(1)::text").extract_first()
        channel['channel_is_verified'] = response.css('SELETOR_PARA_VERIFICACAO_DO_CANAL').extract_first()
        channel['number_of_followers'] = response.css('SELETOR_PARA_NUMERO_DE_SEGUIDORES').extract_first()
        channel['videos_urls'] = response.css('SELETOR_PARA_URLS_DOS_VIDEOS').extract()

        yield channel
